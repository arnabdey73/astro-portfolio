---
// FloatingServicesButton Component
---

<a 
  href="/services" 
  id="floatingServices" 
  class="fixed bottom-[80px] right-6 bg-indigo-600 hover:bg-indigo-700 text-white p-3 rounded-full shadow-lg transition-all duration-300 ease-in-out transform scale-0 opacity-0 z-[120]"
  aria-label="View Services"
  title="View Services & Get Quote"
>
  <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"/>
  </svg>
</a>

<script>
  function initFloatingServices() {
    const floatingServicesButton = document.getElementById('floatingServices');
    
    if (!floatingServicesButton) return;

    // Show button after scrolling
    function toggleFloatingServices() {
      if (window.pageYOffset > 300) {
        floatingServicesButton?.classList.remove('scale-0', 'opacity-0');
        floatingServicesButton?.classList.add('scale-100', 'opacity-100');
      } else {
        floatingServicesButton?.classList.remove('scale-100', 'opacity-100');
        floatingServicesButton?.classList.add('scale-0', 'opacity-0');
      }
    }

    // Throttle scroll events for better performance
    let throttleTimer = false;
    const throttle = (callback: () => void, time: number) => {
      if (throttleTimer) return;
      throttleTimer = true;
      setTimeout(() => {
        callback();
        throttleTimer = false;
      }, time);
    };

    // Event listeners
    window.addEventListener('scroll', () => {
      throttle(toggleFloatingServices, 100);
    });
    window.addEventListener('resize', () => {
      throttle(toggleFloatingServices, 100);
    });
    
    // Initial check
    toggleFloatingServices();
  }

  // Initialize when DOM is loaded
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initFloatingServices);
  } else {
    initFloatingServices();
  }
</script>
