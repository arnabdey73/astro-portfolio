---
// FloatingFAQButton Component
---

<button 
  id="floatingFAQ" 
  class="fixed bottom-20 right-6 bg-indigo-600 hover:bg-indigo-700 text-white p-3 rounded-full shadow-lg transition-all duration-300 ease-in-out transform scale-0 opacity-0 z-[100]"
  aria-label="View FAQs"
  title="View FAQs"
>
  <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
  </svg>
</button>

<script>
  function initFloatingFAQ() {
    const floatingFAQButton = document.getElementById('floatingFAQ');
    const faqSection = document.getElementById('faq-section');
    
    if (!floatingFAQButton || !faqSection) return;

    // Check if FAQ section is in viewport
    function isElementInViewport(el: Element) {
      const rect = el.getBoundingClientRect();
      return (
        rect.top <= (window.innerHeight || document.documentElement.clientHeight) &&
        rect.bottom >= 0
      );
    }
    
    // Show button after scrolling and hide when FAQ section is in view
    function toggleFloatingFAQ() {
      // Check if FAQ section is in viewport
      const isFAQVisible = isElementInViewport(faqSection);
      
      // Only show if we've scrolled down and FAQ section is not yet visible
      if (window.pageYOffset > 800 && !isFAQVisible) {
        floatingFAQButton?.classList.remove('scale-0', 'opacity-0');
        floatingFAQButton?.classList.add('scale-100', 'opacity-100');
      } else {
        floatingFAQButton?.classList.remove('scale-100', 'opacity-100');
        floatingFAQButton?.classList.add('scale-0', 'opacity-0');
      }
    }

    // Scroll to FAQ section
    function scrollToFAQ() {
      faqSection?.scrollIntoView({ behavior: 'smooth', block: 'start' });
    }

    // Event listeners
    window.addEventListener('scroll', toggleFloatingFAQ);
    floatingFAQButton?.addEventListener('click', scrollToFAQ);

    // Initial check
    toggleFloatingFAQ();
  }

  // Initialize when DOM is loaded
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initFloatingFAQ);
  } else {
    initFloatingFAQ();
  }
</script>
