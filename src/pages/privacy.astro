---
import Layout from '../layouts/Layout.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import BackToTop from '../components/BackToTop.astro';
import { getPersonalInfo, getSiteMetadata } from '../utils/portfolio-data.js';

const personalInfo = getPersonalInfo();
const siteMetadata = getSiteMetadata();
---

<Layout 
  title={`Privacy Policy | ${personalInfo.name} - Portfolio`}
  description="Privacy policy for contact form submissions and data handling on this portfolio website."
>
  <Header />
  
  <main class="bg-white dark:bg-gray-900">
    <!-- Hero Section -->
    <section class="py-12 sm:py-16 lg:py-20 bg-gray-50 dark:bg-gray-800">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center">
          <h1 class="text-3xl font-extrabold text-gray-900 dark:text-white sm:text-4xl sm:tracking-tight lg:text-5xl">
            Privacy Policy
          </h1>
          <p class="mt-6 max-w-2xl mx-auto text-xl text-gray-600 dark:text-gray-300">
            How I handle your information when you contact me through this website.
          </p>
        </div>
      </div>
    </section>

    <!-- Privacy Policy Content -->
    <section class="py-16">
      <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="prose prose-lg dark:prose-invert max-w-none">
          
          <!-- Last Updated -->
          <div class="bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-700 rounded-lg p-4 mb-8">
            <p class="text-blue-800 dark:text-blue-200 text-sm mb-0">
              <strong>Last Updated:</strong> July 5, 2025
            </p>
          </div>

          <!-- Introduction -->
          <h2>Introduction</h2>
          <p>
            This privacy policy explains how I collect, use, and protect your personal information when you use the contact form on this portfolio website. Your privacy is important to me, and I am committed to protecting your personal data.
          </p>

          <!-- Information I Collect -->
          <h2>Information I Collect</h2>
          <p>When you use the contact form on this website, I collect the following information:</p>
          <ul>
            <li><strong>Name:</strong> To know how to address you in my response</li>
            <li><strong>Email Address:</strong> To respond to your inquiry</li>
            <li><strong>Subject:</strong> To understand the nature of your inquiry</li>
            <li><strong>Message:</strong> The content of your inquiry</li>
            <li><strong>Project Budget (Optional):</strong> To understand the scope of potential projects</li>
            <li><strong>Timeline (Optional):</strong> To understand your project timeline needs</li>
          </ul>

          <!-- How I Use Your Information -->
          <h2>How I Use Your Information</h2>
          <p>I use the information you provide to:</p>
          <ul>
            <li>Respond to your inquiries and questions</li>
            <li>Discuss potential projects or collaborations</li>
            <li>Provide information about my services</li>
            <li>Maintain records of our communication</li>
          </ul>
          <p>
            <strong>I do not:</strong>
          </p>
          <ul>
            <li>Sell, rent, or share your personal information with third parties</li>
            <li>Use your information for marketing purposes without your consent</li>
            <li>Send unsolicited emails or communications</li>
            <li>Store payment information (as no payments are processed through this site)</li>
          </ul>

          <!-- Data Storage and Security -->
          <h2>Data Storage and Security</h2>
          <p>
            Your contact form submissions are handled through secure email delivery systems. The information you provide is:
          </p>
          <ul>
            <li>Transmitted securely using encrypted connections (HTTPS)</li>
            <li>Stored only in my private email account and secure communication tools</li>
            <li>Protected by industry-standard security measures</li>
            <li>Accessed only by me for the purpose of responding to your inquiry</li>
          </ul>

          <!-- Data Retention -->
          <h2>Data Retention</h2>
          <p>
            I retain your contact information and communication history:
          </p>
          <ul>
            <li><strong>Active Inquiries:</strong> Until our conversation is complete</li>
            <li><strong>Project Communications:</strong> For the duration of the project and up to 2 years after completion for reference</li>
            <li><strong>General Inquiries:</strong> Up to 1 year to follow up on potential future opportunities</li>
          </ul>
          <p>
            You can request deletion of your information at any time by contacting me at {personalInfo.email}.
          </p>

          <!-- Your Rights -->
          <h2>Your Rights</h2>
          <p>You have the right to:</p>
          <ul>
            <li><strong>Access:</strong> Request a copy of the personal information I have about you</li>
            <li><strong>Correct:</strong> Request correction of inaccurate or incomplete information</li>
            <li><strong>Delete:</strong> Request deletion of your personal information</li>
            <li><strong>Withdraw Consent:</strong> Stop future communications at any time</li>
            <li><strong>Data Portability:</strong> Request your data in a portable format</li>
          </ul>
          <p>
            To exercise any of these rights, please contact me at <a href={`mailto:${personalInfo.email}`} class="text-indigo-600 dark:text-indigo-400 hover:text-indigo-500">{personalInfo.email}</a>.
          </p>

          <!-- GDPR Compliance (EU General Data Protection Regulation) -->
          <h2>GDPR Compliance</h2>
          <p>
            This website complies with the EU General Data Protection Regulation (GDPR) for all users, regardless of location. Under GDPR, you have enhanced rights regarding your personal data:
          </p>
          
          <h3>Legal Basis for Processing</h3>
          <p>I process your personal data based on the following legal grounds:</p>
          <ul>
            <li><strong>Consent (Article 6(1)(a)):</strong> When you voluntarily submit the contact form</li>
            <li><strong>Legitimate Interest (Article 6(1)(f)):</strong> To respond to your inquiries and provide requested services</li>
            <li><strong>Contract Performance (Article 6(1)(b)):</strong> When processing is necessary for project communications</li>
          </ul>
          
          <h3>Your GDPR Rights</h3>
          <p>Under GDPR, you have the following rights:</p>
          <ul>
            <li><strong>Right to be Informed (Article 13-14):</strong> This privacy policy fulfills this requirement</li>
            <li><strong>Right of Access (Article 15):</strong> Request a copy of all personal data I hold about you</li>
            <li><strong>Right to Rectification (Article 16):</strong> Correct inaccurate or incomplete data</li>
            <li><strong>Right to Erasure (Article 17):</strong> Request deletion of your personal data ("right to be forgotten")</li>
            <li><strong>Right to Restrict Processing (Article 18):</strong> Limit how your data is used</li>
            <li><strong>Right to Data Portability (Article 20):</strong> Receive your data in a machine-readable format</li>
            <li><strong>Right to Object (Article 21):</strong> Object to processing based on legitimate interests</li>
            <li><strong>Rights Related to Automated Decision Making (Article 22):</strong> Not applicable as no automated decisions are made</li>
          </ul>
          
          <h3>Data Protection Officer</h3>
          <p>
            As a small personal website, I am not required to appoint a Data Protection Officer. However, I take data protection seriously and you can contact me directly at <a href={`mailto:${personalInfo.email}`} class="text-indigo-600 dark:text-indigo-400 hover:text-indigo-500">{personalInfo.email}</a> for any GDPR-related inquiries.
          </p>
          
          <h3>Supervisory Authority</h3>
          <p>
            If you believe your data protection rights have been violated, you have the right to lodge a complaint with the Swedish Authority for Privacy Protection (Integritetsskyddsmyndigheten) or your local data protection authority.
          </p>

          <!-- Cookies and Tracking -->
          <h2>Cookies and Website Analytics</h2>
          
          <h3>Cookie Policy</h3>
          <p>
            This website is designed with privacy in mind and uses minimal tracking technology:
          </p>
          
          <h4>Essential Cookies</h4>
          <ul>
            <li><strong>Session Storage:</strong> Used temporarily for form validation and user experience (not persistent)</li>
            <li><strong>Local Storage:</strong> May store theme preferences (dark/light mode) locally in your browser</li>
            <li><strong>No Third-Party Tracking:</strong> This site does not use Google Analytics, Facebook Pixel, or similar tracking services</li>
          </ul>
          
          <h4>Technical Cookies</h4>
          <p>The following technical storage may be used:</p>
          <ul>
            <li><strong>Theme Preference:</strong> Remembers your dark/light mode choice (stored locally, not transmitted)</li>
            <li><strong>Form State:</strong> Temporarily preserves form data to prevent loss during submission</li>
            <li><strong>Security:</strong> CSRF protection tokens when using contact forms</li>
          </ul>
          
          <h4>No Marketing or Analytics Cookies</h4>
          <p>This website explicitly does NOT use:</p>
          <ul>
            <li>Google Analytics or similar analytics services</li>
            <li>Social media tracking pixels</li>
            <li>Advertising cookies or retargeting</li>
            <li>Cross-site tracking technologies</li>
            <li>Third-party marketing tools</li>
          </ul>
          
          <h3>How to Control Cookies</h3>
          <p>You can control cookies through your browser settings:</p>
          <ul>
            <li><strong>Block All Cookies:</strong> Set your browser to reject all cookies (may affect functionality)</li>
            <li><strong>Block Third-Party Cookies:</strong> This site doesn't use them, but it's a good general practice</li>
            <li><strong>Clear Existing Cookies:</strong> Delete any stored preferences</li>
            <li><strong>Privacy Mode:</strong> Use incognito/private browsing for no persistent storage</li>
          </ul>
          
          <h3>External Services</h3>
          <p>When you submit the contact form, your data may be processed by these privacy-compliant services:</p>
          <ul>
            <li><strong>Netlify Forms:</strong> GDPR-compliant form processing (if deployed on Netlify)</li>
            <li><strong>Formspree:</strong> GDPR-compliant email delivery service</li>
            <li><strong>FormSubmit:</strong> Privacy-focused form handling with encrypted endpoints</li>
          </ul>
          <p>Each service has their own privacy policies and GDPR compliance measures.</p>

          <!-- Third-Party Services -->
          <h2>Third-Party Services</h2>
          <p>
            The contact form may use third-party services for email delivery (such as Formspree or similar services). These services have their own privacy policies:
          </p>
          <ul>
            <li>They are used solely for the purpose of delivering your message to me</li>
            <li>They do not have permission to use your data for their own purposes</li>
            <li>Your data is not shared with these services beyond what's necessary for message delivery</li>
          </ul>

          <!-- Children's Privacy -->
          <h2>Children's Privacy</h2>
          <p>
            This website is not intended for children under 13 years of age. I do not knowingly collect personal information from children under 13. If you are a parent or guardian and believe your child has provided personal information, please contact me to have it removed.
          </p>

          <!-- International Data Transfers -->
          <h2>International Data Transfers</h2>
          <p>
            This website is operated from Sweden, which is part of the European Economic Area (EEA) and subject to GDPR. For users outside the EEA:
          </p>
          <ul>
            <li><strong>Data Processing Location:</strong> Primary data processing occurs within the EEA (Sweden)</li>
            <li><strong>Third-Party Services:</strong> Some form processing services may transfer data outside the EEA using appropriate safeguards</li>
            <li><strong>Adequacy Decisions:</strong> Transfers only occur to countries with adequate data protection or with appropriate safeguards</li>
            <li><strong>Standard Contractual Clauses:</strong> Used when necessary for international transfers</li>
          </ul>
          
          <h3>Cross-Border Data Protection</h3>
          <p>
            If you are accessing this site from outside the EEA, please be aware that:
          </p>
          <ul>
            <li>Your data receives the same level of protection as required by GDPR</li>
            <li>All third-party services used are GDPR-compliant or have adequate data protection measures</li>
            <li>You retain all the rights outlined in this privacy policy regardless of your location</li>
            <li>Data transfers are minimized and only occur when necessary for service delivery</li>
          </ul>

          <!-- Changes to This Policy -->
          <h2>Changes to This Privacy Policy</h2>
          <p>
            I may update this privacy policy from time to time to reflect changes in my practices or for legal reasons. Any changes will be posted on this page with an updated "Last Updated" date. I encourage you to review this policy periodically.
          </p>

          <!-- Contact Information -->
          <h2>Contact Me</h2>
          <p>
            If you have any questions about this privacy policy or how I handle your personal information, please contact me:
          </p>
          <div class="bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4 mt-4">
            <ul class="mb-0">
              <li><strong>Email:</strong> <a href={`mailto:${personalInfo.email}`} class="text-indigo-600 dark:text-indigo-400 hover:text-indigo-500">{personalInfo.email}</a></li>
              <li><strong>Location:</strong> {personalInfo.location}</li>
              <li><strong>Response Time:</strong> Within 24-48 hours</li>
            </ul>
          </div>

          <!-- GDPR Consent and Agreement -->
          <div class="bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-700 rounded-lg p-4 mt-8">
            <h3 class="text-green-800 dark:text-green-200 mt-0">GDPR Consent and Data Processing Agreement</h3>
            <p class="text-green-700 dark:text-green-300 mb-4">
              By using the contact form on this website, you provide <strong>explicit consent</strong> for the processing of your personal data as described in this privacy policy.
            </p>
            <p class="text-green-700 dark:text-green-300 mb-4">
              <strong>You have the right to:</strong>
            </p>
            <ul class="text-green-700 dark:text-green-300 mb-4 space-y-1">
              <li>✓ Withdraw consent at any time without affecting previous processing</li>
              <li>✓ Request immediate deletion of your data</li>
              <li>✓ Access all information I have about you</li>
              <li>✓ Correct any inaccurate information</li>
              <li>✓ Lodge a complaint with data protection authorities</li>
            </ul>
            <p class="text-green-700 dark:text-green-300 mb-0">
              If you do not agree with this policy or wish to withdraw consent, please do not use the contact form and instead reach out to me directly via email or social media. Your consent can be withdrawn at any time by contacting <a href={`mailto:${personalInfo.email}`} class="text-green-600 dark:text-green-400 hover:text-green-500 underline font-medium">{personalInfo.email}</a>.
            </p>
          </div>
        </div>
      </div>
    </section>
  </main>
  
  <Footer />
  <BackToTop />
</Layout>

<style>
  /* Ensure proper spacing for prose content */
  .prose h2 {
    @apply mt-8 mb-4 text-2xl font-bold text-gray-900 dark:text-white;
  }
  
  .prose h3 {
    @apply mt-6 mb-3 text-xl font-semibold text-gray-900 dark:text-white;
  }
  
  .prose p {
    @apply mb-4 text-gray-600 dark:text-gray-300 leading-relaxed;
  }
  
  .prose ul {
    @apply mb-4 space-y-1;
  }
  
  .prose li {
    @apply text-gray-600 dark:text-gray-300;
  }
  
  .prose a {
    @apply text-indigo-600 dark:text-indigo-400 hover:text-indigo-500 underline;
  }
</style>
